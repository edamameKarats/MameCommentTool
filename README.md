# MameComment
Twitcasting における、コメントを投稿・表示したり、右から左に流したりするツールです。

## Description
* ビューワー機能：放送のコメントを表示したり、コメントを送信したりします
* ボード機能　　：放送で取得したコメントを右から左に流します。(背景透過機能付き)


## Demo
Twitcastingの放送に接続し、ビューワーからコメントを投稿し、そのコメントをボードで流しているところです。  
他のユーザーの投稿も1秒に1回取得され、ビューワー・ボードに反映されます。  
コメントは絵文字、改行(10行まで)対応です。  
![MameCommentTool](https://user-images.githubusercontent.com/39410248/101457062-57649380-3978-11eb-851e-e11d6f8ea94f.gif)

## Requirement
Windows10 or macOS Catalina

## Install
### Windows10
MameComment_vx.x.x.x_for_windows.zipファイルを任意のフォルダに展開してください。
### macOS
MameComment_vx.x.x.x_for_mac.zipファイルを展開し、出てきたMameComment.appファイルをApplicationsフォルダにコピーしてください。

## Usage
### Windows10
MameComment.exeを実行してください。各画面の操作は下記の説明を参照してください。
### macOS
MameComment.appを実行してください。各画面の操作は下記の説明を参照してください。

### メイン画面
![スクリーンショット 2020-12-08 17 13 56](https://user-images.githubusercontent.com/39410248/101457398-d3f77200-3978-11eb-880b-7dd9e6f93c2c.png)
#### [ボードを開く]ボタン
ボード画面を開きます。画面を開いているときは閉じます。
#### [ビューワを開く]ボタン
ビューワー画面を開きます。画面を開いているときは閉じます。
#### [設定を開く]ボタン
設定画面を開きます。画面を開いているときは閉じます。
#### [ユーザーID]入力ボックス
視聴したい番組を放送しているユーザーのIDを入力します。
#### [取得開始]ボタン
指定したユーザーIDの放送のコメント取得を開始します。取得を実行しているときは停止します。

### 設定画面
#### [基本]タブ
![スクリーンショット 2020-12-08 17 15 17](https://user-images.githubusercontent.com/39410248/101457548-06a16a80-3979-11eb-9887-40164226c3de.png)  
##### アクセストークンURL
コメントの取得には、アクセストークンを取得する必要があります。  
[プログラム認証]ボタンでブラウザウィンドウが新規に開き、認証を行うことで応答URLのテキストボックスに自動で値が入ります。
ただし、初回の場合このブラウザウィンドウでの認証がうまく行かない場合があります。その場合はアクセス先に示したURLをブラウザで開き、リダイレクトされた画面(おそらくアクセス不能なはず)のURL部分をブラウザからコピーし、テキストボックスにペーストしてください。
##### ログ出力
対象のファイルにログを出力するかどうかを設定します。説明上未実装となっていますが、現在は出力可能です。(ただし、試験運用中)  
出力する場合はチェックボックスをONにし、ファイル名を入力してください。  
Windows： プログラム配置フォルダ¥resources¥app¥ に出力されます。  
Mac    ： Appファイルフォルダ/Resources/app/ に出力されます。(パッケージの内容を表示する、でAppファイル以下に進んでください)
##### [保存][キャンセル]ボタン
設定を保存、もしくは破棄して設定ウインドウを閉じます。他のタブの設定が完了したら実行してください。
#### [ボード]タブ
![スクリーンショット 2020-12-08 17 15 29](https://user-images.githubusercontent.com/39410248/101457544-0608d400-3979-11eb-9095-f5731585e62c.png)  
##### 配置・サイズ
ボードの配置場所やサイズを指定できますが、ボードはドラッグでも移動・サイズ変更できますので、微調整が必要な場合に設定してください。
##### 行数
ボードに表示されるコメントの行数を指定できます。  
ただし、現在未実装になります。
##### フォント色・背景色
ボードで表示するフォント色とボードの背景色を指定できます。
#### [ビューワー]タブ
![スクリーンショット 2020-12-08 17 15 37](https://user-images.githubusercontent.com/39410248/101457542-05703d80-3979-11eb-9252-13fa9b037771.png)  
##### 配置・サイズ
ビューワーの配置場所やサイズを指定できますが、ビューワーはドラッグでも移動・サイズ変更できますので、微調整が必要な場合に設定してください。
### ボード画面
![スクリーンショット 2020-12-08 17 16 55](https://user-images.githubusercontent.com/39410248/101457733-394b6300-3979-11eb-91cd-4afe039c8bd6.png)
#### [透過切り替え]ボタン
ボードの背景を透過したり、元の色に戻したりすることができます。  
ツイキャス画面の上に重ねて文字だけ表示したい場合は透過、配信でクロマキーを使用するような場合は非透過状態で使用してください。
#### [常に最前面に表示]チェックボックス
ボードを常に最前面に表示するかどうかを設定できます。  
ツイキャスの画面の上に重ねている場合、ブラウザ操作を行ってもボードが前面に来るようにしたい場合に使用してください。
#### [閉じる]ボタン
透過の都合上、通常の閉じるボタンが有りませんので、このボタンもしくはCtrl(Command)+Wでウインドウを閉じるようにしてください。
### ビューワー画面
![スクリーンショット 2020-12-08 17 17 09](https://user-images.githubusercontent.com/39410248/101457741-3a7c9000-3979-11eb-80d6-61a4a6bff663.png)
#### [時刻、画像、名前、コメント]列
コメントが取得されると表示されます。適宜幅を調整してください。
#### テキストボックス
画面下部の白いエリアがコメント入力用のテキストボックスです。  
140文字までの制限があり、表示されていますので超えないように入力してください。
#### [コメント送信]ボタン
コメントを送信します。
### その他
認証などのキャッシュ情報などをクリアして初期状態から起動したい場合は、以下フォルダの内容を削除してください。  
Windows：C:\Users\ユーザー名\AppData\Roaming\mame_comment  
Mac    ：/Users/ユーザー名/Application Support/mame_comment
## Known Issues
配信を行っていないユーザーの場合、ログファイル関連のエラーが出ることがある(Windowsのみ？)  
配信が終了しても、接続状態が続く(これは仕様となる予定)  
ボードにて、改行が2つ以上続けて送られてきた場合に、1個に圧縮されてしまう  
ビューワーにて、\の入力ができない
## Licence
Apache License 2.0(http://www.apache.org/licenses/)
## Author
[枝豆の人](https://twitter.com/edamameKarats http://edamame-karats.seesaa.net/)
